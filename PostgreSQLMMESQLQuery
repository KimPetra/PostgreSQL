-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.customers
(
    "CustomerFname" character varying,
    "CustomerId" integer,
    "CustomerSname" character varying,
    "Customer_DoB" date,
    "Gender" character(1),
    "CustomerShortCode" character varying(5),
    "CustomerPhone" character varying(20),
    "CustomerBname" character varying(32),
    "CustomerSt" character varying(100),
    "CustomerCity" character varying(100),
    "CustomerProv" character varying(100),
    "CustomerPcode" character varying(100),
    "CustomerBNo" integer,
    "CustomerBankAddr" character varying(100),
    customer_sale_no integer,
    PRIMARY KEY ("CustomerId")
);

CREATE TABLE IF NOT EXISTS public."Transactions"
(
    "TransId" integer,
    "CustomerId" integer,
    "ProductId" character varying(250),
    "TransQuantity" integer,
    "TransTotalPrice" integer,
    "TransDate" date,
    PRIMARY KEY ("TransId")
);

CREATE TABLE IF NOT EXISTS public."Product"
(
    "ProductId" integer,
    "ProductName" character varying(100),
    "WarehouseId" integer,
    "ProductDesc" character varying(100),
    "ProductCost" numeric(250),
    PRIMARY KEY ("ProductId")
);

CREATE TABLE IF NOT EXISTS public."Warehouse"
(
    "WarehouseId" integer,
    "StoreId" character varying(250),
    "Quantity" integer,
    PRIMARY KEY ("WarehouseId")
);

CREATE TABLE IF NOT EXISTS public."Store"
(
    "StoreId" character varying(100),
    "StoreName" character varying(100),
    "StoreAddr" character varying(100),
    "StorePhone" character varying(20),
    PRIMARY KEY ("StoreId")
);

ALTER TABLE public."Warehouse"
    ADD FOREIGN KEY ("StoreId")
    REFERENCES public."Store" ("StoreId")
    NOT VALID;


ALTER TABLE public."Product"
    ADD FOREIGN KEY ("WarehouseId")
    REFERENCES public."Warehouse" ("WarehouseId")
    NOT VALID;


ALTER TABLE public."Transactions"
    ADD FOREIGN KEY ("ProductId")
    REFERENCES public."Product" ("ProductId")
    NOT VALID;


ALTER TABLE public.customers
    ADD FOREIGN KEY ("CustomerId")
    REFERENCES public."Transactions" ("CustomerId")
    NOT VALID;

END;